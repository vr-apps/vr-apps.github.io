(this["webpackJsonpvr-apps.github.io"]=this["webpackJsonpvr-apps.github.io"]||[]).push([[0],{72:function(e,n,t){},73:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t.n(r),o=t(46),i=t.n(o),c=t(5);function s(e){var n=e.Parent,t=e.Sandboxed;Object(r.useEffect)((function(){window.parent===window&&u()}),[]);var a=window.parent===window?n:t;return Object(c.jsx)(a,{})}function u(){var e;null===(e=document.querySelector("#security-sandbox-iframe"))||void 0===e||e.remove();var n=document.createElement("iframe");return n.id="security-sandbox-iframe",n.allow="xr-spatial-tracking",n.sandbox="allow-same-origin allow-scripts allow-modals",n.src=window.location.href,document.body.prepend(n),n}function d(e){(window.parent===window?document.querySelector("#security-sandbox-iframe"):window.parent).postMessage(e,window.location.origin)}var p=t(19),l=t(95),f=t(96);var b=t(26),x=t.n(b),j=t(32),v=t(94),w=t(92),m=t(91),h=t(97),O=t(98),g=t(99);function y(e){var n=e.app,t=n.name,r=n.developer,a=n.js,o=n.thumbnail,i=e.onPlay;return Object(c.jsx)(w.a,{sx:{maxWidth:345},children:Object(c.jsxs)(m.a,{onClick:function(){i(a)},children:[Object(c.jsx)(h.a,{sx:{height:200,width:300},image:o}),Object(c.jsxs)(O.a,{children:[Object(c.jsx)(g.a,{gutterBottom:!0,variant:"h5",component:"div",children:t}),Object(c.jsx)(g.a,{variant:"body2",color:"text.secondary",children:r})]})]})})}var k=t(50);function S(){return(S=Object(j.a)(x.a.mark((function e(){var n,t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/vr-apps-catalog/apps.yml");case 2:return n=e.sent,e.next=5,n.text();case 5:return t=e.sent,e.abrupt("return",Object(k.parse)(t).apps);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return P.apply(this,arguments)}function P(){return(P=Object(j.a)(x.a.mark((function e(n){var t,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.isSecureContext){e.next=2;break}return e.abrupt("return",{error:"need https"});case 2:if(navigator.xr){e.next=4;break}return e.abrupt("return",{error:"WebXR not supported"});case 4:return e.next=6,navigator.xr.isSessionSupported("immersive-vr");case 6:if(e.sent){e.next=9;break}return e.abrupt("return",{error:"VR in WebXR not supported"});case 9:return e.next=11,navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]});case 11:return t=e.sent,e.next=14,import(n);case 14:return r=e.sent,e.next=17,r.default.renderer.xr.setSession(t);case 17:return e.next=19,new Promise((function(e){t.addEventListener("end",e)}));case 19:return e.abrupt("return",{ok:!0});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t(72);i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(s,{Parent:function(){var e,n=Object(r.useState)(!1),t=Object(p.a)(n,2),a=t[0],o=t[1];return e=function(e){var n=e.load,t=e.unload;n&&o(!0),t&&(u(),o(!1))},Object(r.useEffect)((function(){function n(n){var t=n.origin,r=n.data;t===window.location.origin&&e(r)}return window.addEventListener("message",n),function(){return window.removeEventListener("message",n)}}),[e]),a?Object(c.jsx)("div",{className:"Parent",children:Object(c.jsx)(l.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},onClick:function(){u(),o(!1)},children:Object(c.jsx)(f.a,{})})}):null},Sandboxed:function(){var e=Object(r.useState)(null),n=Object(p.a)(e,2),t=n[0],a=n[1];return Object(r.useEffect)((function(){(function(){return S.apply(this,arguments)})().then(a)}),[]),t?Object(c.jsx)(v.a,{container:!0,spacing:3,sx:{margin:"0 auto"},children:t.map((function(e,n){return Object(c.jsx)(v.a,{item:!0,children:Object(c.jsx)(y,{app:e,onPlay:function(){var e=Object(j.a)(x.a.mark((function e(n){var t,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d({load:!0}),e.next=3,E(n);case 3:t=e.sent,(r=t.error)&&alert(r),d({unload:!0});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},n)})}))}):null}})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.148a8cac.chunk.js.map