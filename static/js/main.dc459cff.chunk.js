(this["webpackJsonpvr-apps.github.io"]=this["webpackJsonpvr-apps.github.io"]||[]).push([[0],{72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),o=n(46),c=n.n(o),i=n(5);function s(e){var t=e.Parent,n=e.Sandboxed;Object(r.useEffect)((function(){window.parent===window&&u()}),[]);var a=window.parent===window?t:n;return Object(i.jsx)(a,{})}function u(){var e;null===(e=document.querySelector("#security-sandbox-iframe"))||void 0===e||e.remove();var t=document.createElement("iframe");return t.id="security-sandbox-iframe",t.allow="xr-spatial-tracking",t.sandbox="allow-scripts allow-modals",t.src=window.location.href,document.body.prepend(t),t}function l(e){Object(r.useEffect)((function(){function t(t){var n=t.data;e(n)}return window.addEventListener("message",t),function(){return window.removeEventListener("message",t)}}),[e])}function d(e){(window.parent===window?document.querySelector("#security-sandbox-iframe").contentWindow:window.parent).postMessage(e,"*")}var p=n(19),f=n(95),b=n(96);var x=n(26),j=n.n(x),v=n(32),w=n(94),h=n(92),m=n(91),O=n(97),y=n(98),g=n(99);function S(e){var t=e.app,n=t.name,r=t.developer,a=t.js,o=t.thumbnail,c=e.onPlay;return Object(i.jsx)(h.a,{sx:{maxWidth:345,margin:"12px"},children:Object(i.jsxs)(m.a,{onClick:function(){c(a)},children:[Object(i.jsx)(O.a,{sx:{height:200,width:300},image:o}),Object(i.jsxs)(y.a,{children:[Object(i.jsx)(g.a,{gutterBottom:!0,variant:"h5",component:"div",children:n}),Object(i.jsx)(g.a,{variant:"body2",color:"text.secondary",children:r})]})]})})}function k(e){var t=e.apps,n=e.onPlay;return Object(r.useLayoutEffect)((function(){d({getScrollTo:!0})}),[]),Object(i.jsx)(w.a,{container:!0,justifyContent:"center",children:t.map((function(e,t){return Object(i.jsx)(w.a,{item:!0,children:Object(i.jsx)(S,{app:e,onPlay:n})},t)}))})}var E=n(50);function P(){return(P=Object(v.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,fetch("/vr-apps-catalog/apps.yml");case 4:return t=e.sent,e.next=7,t.text();case 7:return n=e.sent,e.abrupt("return",Object(E.parse)(n).apps);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return e.filter("#dev"===location.hash?function(e){var t=e.main,n=e.dev;return t||n}:function(e){return e.main})}function C(e){return L.apply(this,arguments)}function L(){return(L=Object(v.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.isSecureContext){e.next=2;break}return e.abrupt("return",{error:"need https"});case 2:if(navigator.xr){e.next=4;break}return e.abrupt("return",{error:"WebXR not supported"});case 4:return e.next=6,navigator.xr.isSessionSupported("immersive-vr");case 6:if(e.sent){e.next=9;break}return e.abrupt("return",{error:"VR in WebXR not supported"});case 9:return e.next=11,navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]});case 11:return n=e.sent,e.next=14,import(t);case 14:return r=e.sent,e.next=17,r.default.renderer.xr.setSession(n);case 17:return e.next=19,new Promise((function(e){n.addEventListener("end",e)}));case 19:return e.abrupt("return",{ok:!0});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(72);c.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(s,{Parent:function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)({x:0,y:0}),c=Object(p.a)(o,2),s=c[0],x=c[1];return l((function(e){var t=e.load,r=e.unload,o=e.setScrollTo,c=e.getScrollTo;n?r&&(u(),a(!1)):(t&&a(!0),o&&x(o)),!0===c&&d({setScrollTo:s})})),n?Object(i.jsx)("div",{className:"Parent",children:Object(i.jsx)(f.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},onClick:function(){u(),a(!1)},children:Object(i.jsx)(b.a,{})})}):null},Sandboxed:function(){var e=Object(r.useState)(null),t=Object(p.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){(function(){return P.apply(this,arguments)})().then(T).then(a)}),[]),l((function(e){var t=e.setScrollTo;t&&window.scrollTo(t.x,t.y)})),n?Object(i.jsx)(k,{apps:n,onPlay:function(){var e=Object(v.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d({load:!0,setScrollTo:{x:window.scrollX,y:window.scrollY}}),e.next=3,C(t);case 3:n=e.sent,(r=n.error)&&alert(r),d({unload:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}):null}})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.dc459cff.chunk.js.map